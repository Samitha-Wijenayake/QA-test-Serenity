serenity {
    take.screenshots = FOR_FAILURES
    restart.browser.for.each = feature
}

headless.mode = true
webdriver {
  driver = chrome
  capabilities {
    browserName = "chrome"
    acceptInsecureCerts = true
    "goog:chromeOptions" {
      args = [
        "headless",                   # ⬅️ REQUIRED for GitHub Actions
        "remote-allow-origins=*",
        "test-type",
        "no-sandbox",
        "ignore-certificate-errors",
        "window-size=1920,1080",      # ⬅️ Standardized size for headless
        "incognito",
        "disable-infobars",
        "disable-gpu",
        "disable-default-apps",
        "disable-popup-blocking",
        "disable-dev-shm-usage",      # ⬅️ Critical for Linux memory issues
        "disable-extensions",
        "disable-web-security",
        "disable-translate",
        "disable-logging"
      ]
    }
  }
}
